<!DOCTYPE html>
<html>
<head>
    <title>Test Player Redirect</title>
</head>
<body>
    <h1>Testing Player V2 to V3 Redirect</h1>
    
    <h2>Test URLs:</h2>
    <ul>
        <li>
            <a href="http://localhost:5000/player-v2.html?url=https%3A%2F%2Fv8.kuramanime.tel%2Fanime%2F4081%2Fansatsusha-de-aru-ore-no-status-ga-yuusha-yori-mo-akiraka-ni-tsuyoi-no-da-ga%2Fepisode%2F1" target="_blank">
                Test Episode 1 (Should redirect to V3)
            </a>
        </li>
        <li>
            <a href="http://localhost:5000/player-v2.html?url=https%3A%2F%2Fv8.kuramanime.tel%2Fanime%2F4081%2Fansatsusha-de-aru-ore-no-status-ga-yuusha-yori-mo-akiraka-ni-tsuyoi-no-da-ga%2Fepisode%2F2" target="_blank">
                Test Episode 2 (Should redirect to V3)
            </a>
        </li>
    </ul>
    
    <h2>Expected Redirect:</h2>
    <pre>
FROM: /player-v2.html?url=https://v8.kuramanime.tel/anime/4081/.../episode/1
TO:   /episode-v3.html?animeId=4081&slug=...&episode=1
    </pre>
    
    <h2>Direct V3 Access:</h2>
    <ul>
        <li>
            <a href="http://localhost:5000/episode-v3.html?animeId=4081&slug=ansatsusha-de-aru-ore-no-status-ga-yuusha-yori-mo-akiraka-ni-tsuyoi-no-da-ga&episode=1" target="_blank">
                Direct Episode 1
            </a>
        </li>
    </ul>
    
    <script>
        // Test URL decoding
        const testUrl = 'https%3A%2F%2Fv8.kuramanime.tel%2Fanime%2F4081%2Fansatsusha-de-aru-ore-no-status-ga-yuusha-yori-mo-akiraka-ni-tsuyoi-no-da-ga%2Fepisode%2F1';
        const decoded = decodeURIComponent(testUrl);
        console.log('Decoded URL:', decoded);
        
        const match = decoded.match(/\/anime\/(\d+)\/([^\/]+)\/episode\/(\d+)/);
        if (match) {
            console.log('Extracted:');
            console.log('  animeId:', match[1]);
            console.log('  slug:', match[2]);
            console.log('  episode:', match[3]);
        }
    </script>
</body>
</html>
